# Cache
это временная память

Кэш это промежуточное хранилище данных с быстрым доступом, содержащее информацию, которая может быть запрошена с наибольшей вероятностью.

Повторные запросы идут через кэш

### Cache-Control
Это атрибут, значение которого клиент получает от сервера, с указанием того, сколько должен храниться кэш на клиенте для текущего файла. 

| Директива             | Что означает                                    | Пример сценария тестирования                                                                                               |
| --------------------- | ----------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| **`max-age=3600`**    | «Хранить в кеше N секунд»                       | Проверить, что через 1 час (3600 сек) браузер запрашивает данные заново.                                                   |
| **`no-store`**        | «Не кешировать вообще»                          | Убедиться, что конфиденциальные данные (например, PDF с персональной информацией) не остаются в кеше.                      |
| **`no-cache`**        | «Кешировать, но всегда проверять актуальность»  | После обновления страницы браузер должен запросить у сервера: «Есть ли новая версия?» (HTTP-запрос с `If-Modified-Since`). |
| **`private`**         | «Кешировать только в браузере (не в CDN)»       | Проверить, что CDN не отдаёт закешированные данные другому пользователю (например, личный кабинет).                        |
| **`public`**          | «Можно кешировать где угодно»                   | Убедиться, что статичные файлы (CSS, JS) кешируются CDN для ускорения загрузки.                                            |
| **`must-revalidate`** | «Не использовать просроченный кеш без проверки» | Изменить дату на компьютере на будущее → проверить, что браузер не использует старый кеш.                                  |
## Server cache

1. Что кэширует?
	Часто используемые данные; не критичные(актуальные) данные.
2. cache service (e.g. Redis)
	 Это программно-аппаратный кэш (как сервер, только быстрее)
3. in-memory cache
	 Это кэш, которых находится в оперативной памяти на сервере


Что такое cache invalidation?
- обновление данных кэша на сервере при поступлении новой информации

## Client cache
1. Что кэширует
	файлы с данными, которые пришли от сервера
2. Как очистить руками?
	 в настройках браузера

кто решает как долго хранить кэш на клиенте?
СЕРВЕР
1. Cache-Control, Expires. (Headers) - жесткое кэширование (фиксированное время)
	Это связка заголовков от сервера, которые решают как долго хранить кэш на клиенте
2. ETag, If-None-Match
	ETag - это хэш файла. If-None-Match - сравнивает значение ETag и если оно на клиенте равно значению сервера, то ничего не происходит. Если отличаются, то сервер отправляет новый файл. Если файл не изменился, сервер отправит код 304 (not modified)
3. Last-Modified, If-Modified-Since - похоже на пункт два, но тут сравниваются даты
4. Версионирование файлов - если отличаются версии файлов.

Clear-Site-Data Header - сервер сообщает браузеру, что он хочет почистить на клиенте (cache/cookie/local storage...). Не все браузеры поддерживают этот заголовок!

