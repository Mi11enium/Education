# Дисковая операционная система
### DOS обеспечивает операционную среду, в которой выполняются другие программы
ФУНКЦИИ DOS

Программа использует функции DOS посредством программного прерывания. Благодаря этому, программа может вызывать соответствующую служебную программу, не зная ее адреса. Нужное прерывание задается программистом. А во время инициализации DOS векторы прерывания для функций системы определяются таким образом, чтобы они указывали на соответствующие подпрограммы.

Прерывание Действие
21H Вызов функции
Значение
в AH Функция
2 Вывод на экран
9 вывод строки

Прерывание 21H является прерыванием, через которое происходи обращение к основным функциям DOS. Это прерывание обеспечивает доступ к системе ввода-вывода, управляемой DOS.

Выбор функции в программе осуществляется с помощью записи в регистр AH нужного значения перед выполнением прерывания 21H.

### Язык Ассемблера

> [!attention] Ассемблер
> **Язык ассемблера** — это **язык символического кодирования двоичных кодов машинных команд и имен данных**. Специальная программа, называемая программой-ассемблером, переводит символические обозначения в двоичные коды операций и адреса переменных и, кроме того, распределяет память для программы, подпрограмм и данных и выполняет другую работу по отладке и выполнению программы.


***
### Программы-ассемблеры для микропроцессоров семейства 80х86 фирмы Intel

Процессоры фирмы Intel (8086, 8088, 80286, 80386, 80486, Pentium, Pentium Pro) объединяют в семейство 80х86, поскольку в них соблюдается преемственность: программа, написанная для младшей модели может без каких-либо изменений выполнена на любой более старшей модели. Обеспечивается это тем, что в основе всех этих процессоров лежит система команд 8086, в старшие же модели лишь добавляются новые команды (необходимые, главным образом, для реализации многозадачного режима). Процессоры 8086, 8088 и 80286 являются 16-разрядными, 80386 и 80486 - 32-разрядными, а, начиная с Pentium - 64-разрядными. Начиная с процессора 80286 эти процессоры могут работать в двух режимах - реальном, фактически представляющем собой очень быстрый вариант процессора 8086 и в защищенном, позволяющем реализовать многозадачный режим работы.

Для языка ассемблера процессоров 80х86 существует несколько реализаций, наиболее распространенными из которых является макроассемблер фирмы Microsoft (MASM) и Turbo Assembler фирмы Borland (TASM).
***
### Алфавит и идентификаторы языка ассемблера
> [!attention] Алфавит
> **Алфавит** - (совокупность допустимых символов) языка ассемблер включает: прописные и строчные буквы латинского алфавита, цифры и набор специальных символов.

Не допустимый символ программа-ассемблер переводит в пробел.

Для обозначения различных объектов программы: переменных, меток, символических имен команд и т.д. в ассемблере используются **идентификаторы**.

Идентификатор - это последовательность из латинских букв (прописных или строчных), цифр и следующих знаков:
? . @ _ $
идентификатор не должен начинаться с цифры.
***
### Команды
> [!attention] Команды
> **Предложения-команды** - это символьная форма записи машинных команд. Формат записи команд следующий: метка: мнемокод операнды; комментарий.

Метка (идентификатор команды) нужна для ссылок на команду из других мест программы, например для перехода на эту команду. Поскольку не на все команды необходимы ссылки, метка в команде может отсутствовать (в этом случае первым идентификатором в команде является мнемокод). Если метка есть, после нее обязательно должно следовать двоеточие.

Мнемокод (мнемонический код) является обязательной частью команды. Это служебное слово, которое в языке ассемблер нельзя использовать для других целей (например, в качестве имени переменной). Мнемокод указывает в символьной форме операцию, которую должна выполнить команда. Мнемокоды операций будут рассмотрены при описании отдельных команд ассемблера.

Если операндов в команде несколько, они отделяются друг от друга запятыми.

В конце команды можно поместить комментарий, поставив символ “;” и записав за ним любой текст. Этот комментарий обычно используется для пояснения действий данной команды.

Пример записи команд:

lab: add si,2; изменение индекса.
***
### Директивы

Помимо команд в программе надо указать ассемблеру и другие вещи (например, опеределить переменные, используемые в программе). Такие действия выполняются с помощью директив ассемблера, имеющих следующий формат:

имя название_директивы операнды; комментарий

Как видно, формат директив в целом совпадает с форматом команд.

Пример директивы:

x db 10,-5, 0ffh; массив x.
***
### Константы

В языке ассемблера в командах и директивах оператора могут использоваться целые, вещественные и строковые константы.

**Целые константы** могут быть записаны в десятичной, двоичной, восьмиричной или шестнадцатиричной системе счисления.

Признаком системы счисления является односимвольный идентификатор в конце числа:

- d - для десятичных констант;
- b - для двоичных констант;
- q или o - для восьмеричных констант;
- h - для шестнадцатиричных констант.

Если идентификатор системы счисления отсутствует, считается, что константа записана в десятичной системе счисления.

**Вещественные константы**, записываются в общем виде как выpажения вида:
[+/-]целое.дpобь[E[+/-]степень]
(выражения в квадратных скобках могут быть опущены). Примеры записи вещественных констант:

98.6 -5.391E4 7.391E-7

**Строковые константы** могут содержать любые символы кода ASCII. Строковые константы заключаются в одиночные или двойные кавычки.

Примеры строковых констант:

‘a’ ‘abc’ ‘don’’t’ “f” “”” плавающая”” точка”.
***
### Директивы определения данных

Директивы определения данных предназначены для **описания переменных**, с которыми работает программа.

Имя директивы задает имя описываемой переменной (или группы переменных), а название директивы - размер памяти выделяемую перед переменную или элемент группы переменных с заданным именем.

В языке ассемблера можно задать следующие названия директив для выделения памяти под переменные или группы переменных:
- db (define byte) - выделить один байт;
- dw (define word) - выделить слово (2 байта);
- dd (define double word) - выделить двойное слово (4 байта);
- dq (define quad word) - выделить четвертное слова (8 байт);
- dt (define ten bytes) - выделить 10 байт.

Директива определения данных должна содержать один или несколько операндов. В качестве операнда может выступать:

- символ “?”;
- константа;

Задание символа “?” в качестве операнда означает, что значение данной переменной не определено и директивой определения данных ей просто выделяется память указанного размера.

Если операндом памяти является числовая константа, то переменной выделяется память и ей присваивается значение, т.е. переменная инициализируется.

**_Примеры записи директив определения данных с одним операндом:_**
x1 db?; для переменной x1 выделен один байт (ее значение не определено)
u12 dd (var_1-10)/2; для переменной u12 выделено 4 байта и ее начальное; значение вычисляется

q dw?; под переменную q выделено слово (2 байта)

v db type q; переменной v будет присвоено значение длины q, т.е. 2


**_Пример записи директивы определения данных с несколькими операндами:_**
m db 2,-2,?,? ; задан массив m из четырех элементов

Приведенная директива является более короткой формой записи следующих директив:
m db 2
db -2
db ?
db ?

Строковые переменные, фактически являющиеся массивами символов, могут быть описаны в директиве db с помощью одного или нескольких операндов. Например, представления строковой переменной str1 со значением ‘abc’ в виде:

str1 db ‘abc’ или str1 db ‘a’,’b’,c’ или str1 db ‘a’,’bc’ или

str1 db ‘a’

db ‘b’

db ‘c’

являются эквивалентными.

В случае, когда среди операндов директивы определения данных среди значений операндов имеются одинаковые повторяющие значения, для сокращения записи можно использовать оператор dup, который записывается следующим образом:

1.  коэф_повт dup (значение1, значение2,...)
2.  где коэф_повт - коэффициент повторения (константа или выражение) заданных значений.

**_Примеры записи директив определения данных с использованием dup:_**

1.  a dw 10 dup(0) ;задан массив a из 10 элементов, которым присвоено значение 0
2.  out_str db 12 dup(“ “), “Заголовок текста” ; строка содержит 12 пробелов и текст